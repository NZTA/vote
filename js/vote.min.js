(()=>{const e=(e,t)=>{let o=e.getAttribute("href"),n=e.getAttribute("data-vote"),s=e.getAttribute("data-comment-id"),l=document.getElementById("VoteForm").querySelector('input[name="SecurityID"]').value;fetch(o,{method:"post",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","X-Requested-With":"XMLHttpRequest"},body:encodeURI(`vote=${n}&comment_id=${s}&SecurityID=${l}`)}).then(e=>{if(e.ok)return e.json()}).then(e=>{((e,t,o,n)=>{let s=e.querySelectorAll(".vote__link"),l=e.querySelector(`.vote__link--${t.toLowerCase()}`),r=e.querySelector(".vote__num--like"),i=e.querySelector(".vote__num--dislike");for(let e=0;e<s.length;e++)s[e].classList.remove("vote__link--selected");l.classList.add("vote__link--selected"),r&&(r.innerHTML=o),i&&(i.innerHTML=n)})(t,e.status,e.numLikes,e.numDislikes)}).then(e=>{t.classList.remove("vote--processing")}).catch(e=>{let o=t.querySelector(".vote__message");o&&(o.style.display=""),t.classList.remove("vote--processing")})};document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelectorAll(".vote");if(0!==t.length)for(let o=0;o<t.length;o++){let n=t[o],s=n.querySelectorAll("[data-vote]");if(0===s.length)return;for(let t=0;t<s.length;t++){s[t].addEventListener("click",t=>{t.preventDefault();let o=t.currentTarget,s=n,l=s.querySelector(".vote__message");if(l&&(l.style.display="none"),s.classList.contains("vote--processing")||o.classList.contains("vote__link--selected"))return!1;s.classList.add("vote--processing"),e(o,s)})}}})})();