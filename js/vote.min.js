(()=>{const u=(t,o,r,n)=>{let l=t.querySelectorAll(".vote__link"),a=t.querySelector(`.vote__link--${o.toLowerCase()}`),i=t.querySelector(".vote__num--like"),s=t.querySelector(".vote__num--dislike");for(let e=0;e<l.length;e++)l[e].classList.remove("vote__link--selected");a.classList.add("vote__link--selected"),i&&(i.innerHTML=r),s&&(s.innerHTML=n)},d=(t,o)=>{let r=t.getAttribute("href"),n=t.getAttribute("data-vote"),l=t.getAttribute("data-comment-id"),s=document.getElementById("VoteForm").querySelector('input[name="SecurityID"]').value;fetch(r,{method:"post",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","X-Requested-With":"XMLHttpRequest"},body:encodeURI(`vote=${n}&comment_id=${l}&SecurityID=${s}`)}).then(e=>{if(e.ok)return e.json()}).then(e=>{u(o,e.status,e.numLikes,e.numDislikes)}).then(e=>{o.classList.remove("vote--processing")}).catch(e=>{let c=o.querySelector(".vote__message");c&&(c.style.display=""),o.classList.remove("vote--processing")})};document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelectorAll(".vote");if(t.length!==0)for(let o=0;o<t.length;o++){let r=t[o],n=r.querySelectorAll("[data-vote]");if(n.length===0)return;for(let l=0;l<n.length;l++)n[l].addEventListener("click",i=>{i.preventDefault();let s=i.currentTarget,e=r,c=e.querySelector(".vote__message");if(c&&(c.style.display="none"),e.classList.contains("vote--processing")||s.classList.contains("vote__link--selected"))return!1;e.classList.add("vote--processing"),d(s,e)})}})})();
