(function(){const a=function(a,b,c,d){let e=a.querySelectorAll('.vote__link'),f=a.querySelector('.vote__link--'+b.toLowerCase()),g=a.querySelector('.vote__num--like'),h=a.querySelector('.vote__num--dislike');for(let f,g=0;g<e.length;g++)f=e[g],f.classList.remove('vote__link--selected');f.classList.add('vote__link--selected'),g&&(g.innerHTML=c),h&&(h.innerHTML=d)},b=function(b,c){let d=b.getAttribute('href'),e=b.getAttribute('data-vote'),f=b.getAttribute('data-comment-id'),g=document.getElementById('VoteForm'),h=g.querySelector('input[name="SecurityID"]'),i=h.value;fetch(d,{method:'post',credentials:'same-origin',headers:{Accept:'application/json',"Content-Type":'application/x-www-form-urlencoded; charset=utf-8',"X-Requested-With":'XMLHttpRequest'},body:encodeURI('vote='+e+'&comment_id='+f+'&SecurityID='+i)}).then(function(a){if(a.ok)return a.json()}).then(function(b){a(c,b.status,b.numLikes,b.numDislikes)}).then(function(){c.classList.remove('vote--processing')}).catch(function(){let a=c.querySelector('.vote__message');a&&(a.style.display=''),c.classList.remove('vote--processing')})};document.addEventListener('DOMContentLoaded',function(){let a=document.querySelectorAll('.vote');if(0!==a.length)for(let c=0;c<a.length;c++){let d=a[c],e=d.querySelectorAll('[data-vote]');if(0===e.length)return;for(let a,c=0;c<e.length;c++)a=e[c],a.addEventListener('click',function(a){a.preventDefault();let c=a.currentTarget,e=d,f=e.querySelector('.vote__message');return f&&(f.style.display='none'),!(e.classList.contains('vote--processing')||c.classList.contains('vote__link--selected'))&&void(e.classList.add('vote--processing'),b(c,e))})}})})();
