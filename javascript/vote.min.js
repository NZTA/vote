"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(){var updateVote=function(voteEl,status,numLikes,numDislikes){for(var links=voteEl.querySelectorAll(".vote__link"),selected=voteEl.querySelector(".vote__link--"+status.toLowerCase()),likeCount=voteEl.querySelector(".vote__num--like"),dislikeCount=voteEl.querySelector(".vote__num--dislike"),i=0;i<links.length;i++)links[i].classList.remove("vote__link--selected");selected.classList.add("vote__link--selected"),likeCount&&(likeCount.innerHTML=numLikes),dislikeCount&&(dislikeCount.innerHTML=numDislikes)},castVote=function(link,parent){var url=link.getAttribute("href"),dataVote=link.getAttribute("data-vote"),dataCommentID=link.getAttribute("data-comment-id");fetch(url,{method:"post",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded; charset=utf-8","X-Requested-With":"XMLHttpRequest"},body:encodeURI("vote="+dataVote+"&comment_id="+dataCommentID)}).then(function(response){if(response.ok)return response.json()}).then(function(data){updateVote(parent,data.status,data.numLikes,data.numDislikes)}).then(function(data){parent.classList.remove("vote--processing")}).catch(function(err){var errMessage=parent.querySelector(".vote__message");errMessage&&(errMessage.style.display=""),parent.classList.remove("vote--processing")})};document.addEventListener("DOMContentLoaded",function(){var voteComponents=document.querySelectorAll(".vote");if(0!==voteComponents.length)for(var i=0;i<voteComponents.length;i++){var _ret=function(i){var voteComponent=voteComponents[i],buttons=voteComponent.querySelectorAll("[data-vote]");if(0===buttons.length)return{v:void 0};for(var _i=0;_i<buttons.length;_i++)buttons[_i].addEventListener("click",function(e){e.preventDefault();var link=e.currentTarget,parent=voteComponent,message=parent.querySelector(".vote__message");if(message&&(message.style.display="none"),parent.classList.contains("vote--processing")||link.classList.contains("vote__link--selected"))return!1;parent.classList.add("vote--processing"),castVote(link,parent)})}(i);if("object"===(void 0===_ret?"undefined":_typeof(_ret)))return _ret.v}})}();